UPDATE `quest_template` SET `PrevQuestId`='25578', `NextQuestId`='25255' WHERE (`Id`='25584');
UPDATE `quest_template` SET `PrevQuestId`='25319', `NextQuestId`='25842' WHERE (`Id`='25830');

UPDATE `quest_template` SET `PrevQuestId`='25276' WHERE (`Id`='25223');
UPDATE `quest_template` SET `PrevQuestId`='25276' WHERE (`Id`='25224');
UPDATE `quest_template` SET `PrevQuestId`='25578' WHERE (`Id`='25233');
UPDATE `quest_template` SET `PrevQuestId`='25578' WHERE (`Id`='25234');
UPDATE `quest_template` SET `PrevQuestId`='25233', `NextQuestId`='25271' WHERE (`Id`='25268');
UPDATE `quest_template` SET `PrevQuestId`='25233', `NextQuestId`='25270' WHERE (`Id`='25269');
UPDATE `quest_template` SET `PrevQuestId`='25272', `NextQuestId`='25277' WHERE (`Id`='25279');
UPDATE `quest_template` SET `PrevQuestId`='25578', `NextQuestId`='25278' WHERE (`Id`='25280');
UPDATE `quest_template` SET `PrevQuestId`='25223', `NextQuestId`='25509' WHERE (`Id`='25291');
UPDATE `quest_template` SET `PrevQuestId`='25223', `NextQuestId`='25494' WHERE (`Id`='25294');
UPDATE `quest_template` SET `PrevQuestId`='25223', `NextQuestId`='25308' WHERE (`Id`='25296');
UPDATE `quest_template` SET `NextQuestId`='25298' WHERE (`Id`='25297');
UPDATE `quest_template` SET `PrevQuestId`='25499' WHERE (`Id`='25299');
UPDATE `quest_template` SET `PrevQuestId`='25499' WHERE (`Id`='25299');
UPDATE `quest_template` SET `NextQuestId`='25303' WHERE (`Id`='25301');
UPDATE `quest_template` SET `NextQuestId`='25312' WHERE (`Id`='25303');
UPDATE `quest_template` SET `PrevQuestId`='25299' WHERE (`Id`='25309');
UPDATE `quest_template` SET `PrevQuestId`='25309' WHERE (`Id`='25310');
UPDATE `quest_template` SET `PrevQuestId`='25309' WHERE (`Id`='25311');
UPDATE `quest_template` SET `PrevQuestId`='25310' WHERE (`Id`='25314');
UPDATE `quest_template` SET `NextQuestId`='25531' WHERE (`Id`='25315');
UPDATE `quest_template` SET `NextQuestId`='25317' WHERE (`Id`='25316');
UPDATE `quest_template` SET `PrevQuestId`='25278' WHERE (`Id`='25328');
UPDATE `quest_template` SET `PrevQuestId`='25276' WHERE (`Id`='25330');
UPDATE `quest_template` SET `PrevQuestId`='25278' WHERE (`Id`='25332');
UPDATE `quest_template` SET `PrevQuestId`='25312' WHERE (`Id`='25352');
UPDATE `quest_template` SET `PrevQuestId`='25312' WHERE (`Id`='25353');
UPDATE `quest_template` SET `PrevQuestId`='25312', `NextQuestId`='25617' WHERE (`Id`='25355');
UPDATE `quest_template` SET `PrevQuestId`='25316' WHERE (`Id`='25370');
UPDATE `quest_template` SET `PrevQuestId`='25630', `NextQuestId`='25940' WHERE (`Id`='25382');
UPDATE `quest_template` SET `PrevQuestId`='25630', `NextQuestId`='25392' WHERE (`Id`='25385');
UPDATE `quest_template` SET `PrevQuestId`='25630' WHERE (`Id`='25404');
UPDATE `quest_template` SET `PrevQuestId`='25464', `NextQuestId`='25320' WHERE (`Id`='25430');
UPDATE `quest_template` SET `PrevQuestId`='25608', `NextQuestId`='25552' WHERE (`Id`='25644');
UPDATE `quest_template` SET `PrevQuestId`='25578' WHERE (`Id`='25655');
UPDATE `quest_template` SET `PrevQuestId`='25578' WHERE (`Id`='25656');
UPDATE `quest_template` SET `PrevQuestId`='29326' WHERE (`Id`='29437');
UPDATE `quest_template` SET `PrevQuestId`='25578' WHERE (`Id`='27874');
UPDATE `quest_template` SET `PrevQuestId`='25578' WHERE (`Id`='25985');
UPDATE `quest_template` SET `PrevQuestId`='25886' WHERE (`Id`='25901');
UPDATE `quest_template` SET `PrevQuestId`='25843' WHERE (`Id`='25899');
UPDATE `quest_template` SET `PrevQuestId`='25904', `NextQuestId`='25886' WHERE (`Id`='25881');
UPDATE `quest_template` SET `PrevQuestId`='25372', `NextQuestId`='25904' WHERE (`Id`='25843');
UPDATE `quest_template` SET `PrevQuestId`='25807', `NextQuestId`='25523' WHERE (`Id`='25810');
UPDATE `quest_template` SET `PrevQuestId`='25600' WHERE (`Id`='25630');
UPDATE `quest_template` SET `PrevQuestId`='25656' WHERE (`Id`='25731');
UPDATE `quest_template` SET `PrevQuestId`='25985', `NextQuestId`='25746' WHERE (`Id`='25740');
UPDATE `quest_template` SET `PrevQuestId`='25740', `NextQuestId`='25761' WHERE (`Id`='25758');
UPDATE `quest_template` SET `PrevQuestId`='25740', `NextQuestId`='25764' WHERE (`Id`='25763');
UPDATE `quest_template` SET `PrevQuestId`='25740', `NextQuestId`='25795' WHERE (`Id`='25776');
UPDATE `quest_template` SET `PrevQuestId`='25317', `NextQuestId`='25323' WHERE (`Id`='25472');
UPDATE `quest_template` SET `PrevQuestId`='25490', `NextQuestId`='25502' WHERE (`Id`='25492');
UPDATE `quest_template` SET `PrevQuestId`='25490', `NextQuestId`='25507' WHERE (`Id`='25493');
UPDATE `quest_template` SET `PrevQuestId`='25308' WHERE (`Id`='25496');
UPDATE `quest_template` SET `PrevQuestId`='25510' WHERE (`Id`='25514');
UPDATE `quest_template` SET `PrevQuestId`='25316' WHERE (`Id`='25460');
UPDATE `quest_template` SET `PrevQuestId`='25510' WHERE (`Id`='25519');
UPDATE `quest_template` SET `PrevQuestId`='25514' WHERE (`Id`='25520');
UPDATE `quest_template` SET `PrevQuestId`='25608', `NextQuestId`='25555' WHERE (`Id`='25554');
UPDATE `quest_template` SET `PrevQuestId`='25312' WHERE (`Id`='25575');
UPDATE `quest_template` SET `PrevQuestId`='25312' WHERE (`Id`='25576');
UPDATE `quest_template` SET `PrevQuestId`='25312' WHERE (`Id`='25577');
UPDATE `quest_template` SET `PrevQuestId`='25312', `NextQuestId`='25600' WHERE (`Id`='25599');
UPDATE `quest_template` SET `PrevQuestId`='25314', `NextQuestId`='25315' WHERE (`Id`='25601');
UPDATE `quest_template` SET `PrevQuestId`='25600' WHERE (`Id`='25611');
UPDATE `quest_template` SET `PrevQuestId`='25600' WHERE (`Id`='25612');
UPDATE `quest_template` SET `PrevQuestId`='25353' WHERE (`Id`='25623');

-- Warchief's Command: Mount Hyjal!
UPDATE `creature_template` SET `AIName`='SmartAI' WHERE (`entry`='15188');
UPDATE `gossip_menu_option` SET `option_id`='1', `npc_option_npcflag`='1' WHERE (`menu_id`='12125') AND (`id`='0');

DELETE FROM `smart_scripts` WHERE `source_type` = '0' AND `entryorguid` = '15188';
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`) VALUES
('15188', '0', '0', '1', '62', '0', '100', '0', '12125', '0', '0', '0', '72', '0', '0', '0', '0', '0', '0', '7', '0', '0', '0', '0', '0', '0', '0', 'Nepenthe-Cenarion Emissary Blackhoof - On gossip option select - Close gossip'),
('15188', '0', '1', '2', '61', '0', '100', '0', '0', '0', '0', '0', '15', '27721', '0', '0', '0', '0', '0', '7', '0', '0', '0', '0', '0', '0', '0', 'Nepenthe-Cenarion Emissary Blackhoof - On gossip option select - Quest Complete 27721'),
('15188', '0', '2', '0', '61', '0', '100', '0', '0', '0', '0', '0', '11', '26448', '0', '0', '0', '0', '0', '7', '0', '0', '0', '0', '0', '0', '0', 'Nepenthe-Cenarion Emissary Blackhoof - On gossip option select - Cast Teleport - Moonglade');

-- [Kysio's report] [9498] Quests - Flames from Above scripted
SET @ENTRY_EMERALD_FLAMEWEAVER := 40856;
SET @GO_ENTRY := 301051;
SET @SPELL_DRAKE_BREATH := 76205;
SET @QUEST := 25574;
SET @OGUID := 11010;

DELETE FROM `gameobject` WHERE `id` = @GO_ENTRY;
INSERT INTO `gameobject` (`guid`, `id`, `map`, `spawnMask`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation2`, `rotation3`, `spawntimesecs`, `animprogress`, `state`) VALUES ('11010', '301051', '1', '1', '5763.12', '-3296.97', '1604.6', '6.149', '0.0671326', '-0.997744', '90', '255', '1');
DELETE FROM `creature` WHERE `id` = @ENTRY_EMERALD_FLAMEWEAVER;
UPDATE `creature_template` SET `minlevel` = 81, `maxlevel` = 81, `exp` = 3, `faction_A` = 7, `faction_H` = 7, `mindmg` = 1, `baseattacktime` = 2000, `WDBVerified` = 15595, `InhabitType` = 7, `AIName` = "SmartAI" WHERE `entry` = @ENTRY_EMERALD_FLAMEWEAVER;
DELETE FROM `smart_scripts` WHERE `entryorguid` = @ENTRY_EMERALD_FLAMEWEAVER AND `source_type` = 0;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`) VALUES
(@ENTRY_EMERALD_FLAMEWEAVER, 0, 0, 1, 54, 0, 100, 0, 0, 0, 0, 0, 33, @ENTRY_EMERALD_FLAMEWEAVER, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Emerald Flameweaver - Just Summoned - KC"),
(@ENTRY_EMERALD_FLAMEWEAVER, 0, 1, 2, 61, 0, 100, 0, 0, 0, 0, 0, 53, 1, @ENTRY_EMERALD_FLAMEWEAVER, 0, @QUEST, 120000, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Emerald Flameweaver - On Just Summoned - Start WP"),
(@ENTRY_EMERALD_FLAMEWEAVER, 0, 2, 0, 61, 0, 100, 0, 0, 0, 0, 0, 11, @SPELL_DRAKE_BREATH, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Emerald Flameweaver - On Just Summoned - Cast Emerald Flameweaver Drake Breath"),
(@ENTRY_EMERALD_FLAMEWEAVER, 0, 3, 4, 40, 0, 100, 0, 6, 0, 0, 0, 11, @SPELL_DRAKE_BREATH, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Emerald Flameweaver - On WP 6 Reached - Cast Emerald Flameweaver Drake Breath"),
(@ENTRY_EMERALD_FLAMEWEAVER, 0, 4, 0, 61, 0, 100, 0, 0, 0, 0, 0, 41, 3000, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Emerald Flameweaver - On WP 6 Reached - Delayed Despawn");
DELETE FROM `waypoints` WHERE `entry` = @ENTRY_EMERALD_FLAMEWEAVER;
INSERT INTO `waypoints` (`entry`, `pointid`, `position_x`, `position_y`, `position_z`, `point_comment`) VALUES
(@ENTRY_EMERALD_FLAMEWEAVER, 1, 5755.74, -3301.07, 1604.59, "Emerald Flameweaver WP 1"),
(@ENTRY_EMERALD_FLAMEWEAVER, 2, 5761.17, -3310.05, 1611.23, "Emerald Flameweaver WP 2"),
(@ENTRY_EMERALD_FLAMEWEAVER, 3, 5774.52, -3306.65, 1611.97, "Emerald Flameweaver WP 3"),
(@ENTRY_EMERALD_FLAMEWEAVER, 4, 5771.87, -3295.59, 1616.14, "Emerald Flameweaver WP 4"),
(@ENTRY_EMERALD_FLAMEWEAVER, 5, 5761.70, -3286.94, 1609.96, "Emerald Flameweaver WP 5"),
(@ENTRY_EMERALD_FLAMEWEAVER, 6, 5760.41, -3299.26, 1604.59, "Emerald Flameweaver WP 6");
DELETE FROM `spell_target_position` WHERE `id` = @SPELL_DRAKE_BREATH;
INSERT INTO `spell_target_position` (`id`, `effIndex`, `target_map`, `target_position_x`, `target_position_y`, `target_position_z`, `target_orientation`) VALUES
(@SPELL_DRAKE_BREATH, 0, 1, 5762.917969, -3286.747314, 1604.600830, 2.187412);


-- [SQL] [Blue's report] [10417] Quests - Flamebreaker scripted
SET @ENTRY_BLAZEBOUND_ELEMENTAL := 38896;
SET @ENTRY_UNBOUND_FLAME_SPIRIT := 40065;
SET @SPELL_FLAMING_SLICE := 80031;
SET @SPELL_FLAMEBREAKER := 75206;
DELETE FROM `creature_template` WHERE `entry` = @ENTRY_UNBOUND_FLAME_SPIRIT;
INSERT INTO `creature_template` (`entry`, `modelid1`, `name`, `minlevel`, `maxlevel`, `exp`, `faction_A`, `faction_H`, `rank`, `mindmg`, `maxdmg`, `attackpower`, `dmg_multiplier`, `baseattacktime`, `unit_class`, `unit_flags`, `unit_flags2`, `dynamicflags`, `type`, `Health_mod`, `flags_extra`) VALUES ('40065', '31320', 'Unbound Flame Spirit', '80', '80', '3', '2234', '2234', '5', '200', '300', '400', '2', '2400', '2', '32768', '2048', '132', '4', '0.1', '64');
UPDATE `creature_template` SET `KillCredit1`='40065', `modelid1`='31320', `dmg_multiplier`='10', `unit_flags`='0' WHERE (`entry`='40080');
UPDATE `creature_template` SET `exp` = '3', `faction_A` = '2234', `faction_H` = '2234', `speed_walk` = '1.55556', `mindmg` = '391', `maxdmg` = '585', `attackpower` = '146', `dmg_multiplier` = '37.7', `unit_class` = '2', `unit_flags` = '32768', `InhabitType` = '3' WHERE `entry` = @ENTRY_BLAZEBOUND_ELEMENTAL;
UPDATE `creature_template` SET `minlevel` = '80', `maxlevel` = '80', `exp` = '3', `faction_A` = '2234', `faction_H` = '2234', `dmg_multiplier` = '2', `baseattacktime` = '2400', `unit_class` = '2', `unit_flags` = '32768', `WDBVerified` = '15595' WHERE `entry` = @ENTRY_UNBOUND_FLAME_SPIRIT;
DELETE FROM `smart_scripts` WHERE `entryorguid` = @ENTRY_BLAZEBOUND_ELEMENTAL AND `source_type` = '0';
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`) VALUES 
(@ENTRY_BLAZEBOUND_ELEMENTAL, '0', '0', '0', '0', '0', '100', '0', '1000', '2000', '8000', '9000', '11', @SPELL_FLAMING_SLICE, '0', '0', '0', '0', '0', '2', '0', '0', '0', '0', '0', '0', '0', "Nepenthe-Blazebound Elemental - IC - Cast Flaming Slice"),
(@ENTRY_BLAZEBOUND_ELEMENTAL, '0', '1', '0', '8', '0', '100', '0', @SPELL_FLAMEBREAKER, '0', '60000', '60000', '41', '0', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', "Nepenthe-Blazebound Elemental - On Spellhit - Despawn");
DELETE FROM `conditions` WHERE `SourceTypeOrReferenceId` = '17' AND `SourceEntry` = @SPELL_FLAMEBREAKER;
INSERT INTO `conditions` (`SourceTypeOrReferenceId`, `SourceGroup`, `SourceEntry`, `SourceId`, `ElseGroup`, `ConditionTypeOrReference`, `ConditionTarget`, `ConditionValue1`, `ConditionValue2`, `ConditionValue3`, `NegativeCondition`, `ErrorType`, `ErrorTextId`, `ScriptName`, `Comment`) VALUES
('17','0',@SPELL_FLAMEBREAKER,'0','0','31','1','3',@ENTRY_BLAZEBOUND_ELEMENTAL,'0','0','0','0','',"Flameseer's Staff targets Blazebound Elemental");

UPDATE `quest_template` SET `Method`='2' WHERE (`Id`='25323');

-- [c++ and SQL] [Implex' report] [10958] Quests - The Return of Baron Geddon scripted (thanks Green for c++ part)
SET @ENTRY_BARON_GEDDON := 40147;
SET @ENTRY_BARON_GEDDON_WARNING_TRIGGER := 44412;
SET @ENTRY_GALROND := 40148;
SET @ENTRY_TELESSRA := 40149;
SET @ENTRY_ARCH_DRUID_OF_HYJAL := 40150;
SET @KILL_CREDIT := 40334;
SET @SPELL_WEAKENING := 75192;
SET @SPELL_WEAKENING_SERVERSIDE := 75193;
SET @SPELL_WEAKENING_EFFECTDBC_ID := 300008;
SET @SPELL_INFERNO_PING := 75072;
SET @SPELL_INFERNO := 74813;
SET @SPELL_INFERNO_SERVERSIDE := 18947;
SET @SPELL_INFERNO_EFFECTDBC_ID := 300009;
SET @SPELL_INFERNO_DAMAGE := 74817;
SET @SPELL_LIVING_BOMB := 82924;
SET @SPELL_SWIPE := 74811;
SET @SPELL_NATURE_CHANNELING := 71467;
UPDATE `creature_template` SET `exp` = 3, `mindmg` = 468, `maxdmg` = 702, `attackpower` = 175, `dmg_multiplier` = 35, `unit_flags` = 131072, `InhabitType` = 3, `unit_flags` = 0, `mechanic_immune_mask` = 613097244, `WDBVerified` = 15595, `AIName` = "SmartAI" WHERE `entry` = @ENTRY_BARON_GEDDON;
UPDATE `creature_template` SET `exp` = 3, `speed_run` = 0.992063, `mindmg` = 468, `maxdmg` = 702, `attackpower` = 175, `dmg_multiplier` = 35, `InhabitType` = 3, `WDBVerified` = 15595, `AIName` = "SmartAI" WHERE `entry` = @ENTRY_GALROND;
UPDATE `creature_template` SET `exp` = 3, `mindmg` = 468, `maxdmg` = 702, `attackpower` = 175, `dmg_multiplier` = 35, `InhabitType` = 3, `WDBVerified` = 15595, `AIName` = "SmartAI" WHERE `entry` = @ENTRY_TELESSRA;
UPDATE `creature_template` SET `exp` = 3, `mindmg` = 405, `maxdmg` = 609, `attackpower` = 152, `dmg_multiplier` = 37.6, `unit_flags` = 33280, `InhabitType` = 3, `flags_extra` = 2, `WDBVerified` = 15595, `AIName` = "SmartAI" WHERE `entry` = @ENTRY_ARCH_DRUID_OF_HYJAL;
UPDATE `creature_template` SET `WDBVerified` = 15595, `AIName` = "SmartAI" WHERE `entry` = @ENTRY_BARON_GEDDON_WARNING_TRIGGER;
UPDATE `creature` SET `spawntimesecs` = 60 WHERE `id` IN (@ENTRY_BARON_GEDDON, @ENTRY_GALROND, @ENTRY_TELESSRA, @ENTRY_ARCH_DRUID_OF_HYJAL);
DELETE FROM `smart_scripts` WHERE `entryorguid` IN (@ENTRY_BARON_GEDDON, @ENTRY_GALROND, @ENTRY_BARON_GEDDON_WARNING_TRIGGER, @ENTRY_TELESSRA, @ENTRY_ARCH_DRUID_OF_HYJAL) AND `source_type` = 0;
DELETE FROM `smart_scripts` WHERE `entryorguid` = @ENTRY_GALROND*100 AND `source_type` = 9;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`) VALUES 
(@ENTRY_BARON_GEDDON, 0, 0, 0, 4, 0, 100, 0, 0, 0, 0, 0, 42, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Baron Geddon - On Aggro - Set Invincibility HP 1 per cent"),
(@ENTRY_BARON_GEDDON, 0, 1, 0, 0, 0, 100, 0, 28000, 28000, 28000, 28000, 45, 1, 1, 0, 0, 0, 0, 19, @ENTRY_GALROND, 50, 0, 0, 0, 0, 0, "Nepenthe-Baron Geddon - IC - Set Data 1 1 Galrond"),
(@ENTRY_BARON_GEDDON, 0, 2, 0, 0, 0, 100, 0, 30000, 30000, 30000, 30000, 11, @SPELL_INFERNO, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Baron Geddon - IC - Cast Inferno"),
(@ENTRY_GALROND, 0, 0, 0, 4, 0, 100, 0, 0, 0, 0, 0, 42, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Galrond of the Claw - On Aggro - Set Invincibility HP 1 per cent"),
(@ENTRY_GALROND, 0, 1, 0, 0, 0, 100, 0, 4900, 5100, 11000, 12000, 11, @SPELL_SWIPE, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Galrond of the Claw - IC - Cast Swipe"),
(@ENTRY_GALROND, 0, 2, 0, 38, 0, 100, 0, 1, 1, 0, 0, 80, @ENTRY_GALROND*100, 2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Galrond of the Claw - On Data set 1 1 - Run Script"),
(@ENTRY_GALROND*100, 9, 0, 0, 0, 0, 100, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Galrond of the Claw - On Script - Yell Line 0"),
(@ENTRY_GALROND*100, 9, 1, 0, 0, 0, 100, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Galrond of the Claw - On Script - React Passive"),
(@ENTRY_GALROND*100, 9, 2, 0, 0, 0, 100, 0, 0, 0, 0, 0, 20, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Galrond of the Claw - On Script - Stop Autoattack"),
(@ENTRY_GALROND*100, 9, 3, 0, 0, 0, 100, 0, 0, 0, 0, 0, 21, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Galrond of the Claw - On Script - Stop Combat Movement"),
(@ENTRY_GALROND*100, 9, 4, 0, 0, 0, 100, 0, 0, 0, 0, 0, 59, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Galrond of the Claw - On Script - Set Run"),
(@ENTRY_GALROND*100, 9, 5, 0, 0, 0, 100, 0, 0, 0, 0, 0, 69, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 5436.073242, -2793.436279, 1516.093628, 3.813380, "Nepenthe-Galrond of the Claw - On Script - Move To Pos Far"),
(@ENTRY_GALROND*100, 9, 6, 0, 0, 0, 100, 0, 0, 0, 0, 0, 8, 2, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Galrond of the Claw - On Script - React Aggressive"),
(@ENTRY_GALROND*100, 9, 7, 0, 0, 0, 100, 0, 0, 0, 0, 0, 20, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Galrond of the Claw - On Script - Enable Autoattack"),
(@ENTRY_GALROND*100, 9, 8, 0, 0, 0, 100, 0, 0, 0, 0, 0, 21, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Galrond of the Claw - On Script - Enable Combat Movement"),
(@ENTRY_GALROND*100, 9, 9, 0, 0, 0, 100, 0, 5000, 5000, 0, 0, 69, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 5436.294922, -2793.299072, 1516.208862, 3.805633, "Nepenthe-Galrond of the Claw - On Script - Move To Pos Fight"),
(@ENTRY_GALROND*100, 9, 10, 0, 0, 0, 100, 0, 0, 0, 0, 0, 49, 0, 0, 0, 0, 0, 0, 19, @ENTRY_BARON_GEDDON, 50, 0, 0, 0, 0, 0, "Nepenthe-Galrond of the Claw - On Script - Attack Start"),
(@ENTRY_TELESSRA, 0, 0, 0, 4, 0, 100, 0, 0, 0, 0, 0, 42, 0, 25, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Telessra - On Aggro - Set Invincibility HP 25%"),
(@ENTRY_BARON_GEDDON_WARNING_TRIGGER, 0, 0, 0, 54, 0, 100, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Baron Geddon Warning Trigger - Just Summoned - Boss Emote 0"),
(@ENTRY_ARCH_DRUID_OF_HYJAL, 0, 0, 0, 1, 0, 100, 0, 500, 1000, 60000, 60000, 11, @SPELL_NATURE_CHANNELING, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Arch Druid of Hyjal - On Spawn - Cast Nature Channeling");
DELETE FROM `creature_text` WHERE `entry` IN (@ENTRY_GALROND, @ENTRY_BARON_GEDDON_WARNING_TRIGGER);
INSERT INTO `creature_text` (`entry`, `groupid`, `id`, `text`, `type`, `language`, `probability`, `emote`, `duration`, `sound`, `comment`) VALUES
(@ENTRY_GALROND, 0, 0, "Fall back!!!", 14, 0, 100, 0, 0, 0, "Galrond of the Claw"),
(@ENTRY_GALROND, 0, 1, "Get away from him until the fire dies down!", 14, 0, 100, 0, 0, 0, "Galrond of the Claw"),
(@ENTRY_GALROND, 0, 2, "Here it comes, fall back!", 14, 0, 100, 0, 0, 0, "Galrond of the Claw"),
(@ENTRY_GALROND, 0, 3, "Look out!", 14, 0, 100, 0, 0, 0, "Galrond of the Claw"),
(@ENTRY_GALROND, 0, 4, "Move back!", 14, 0, 100, 0, 0, 0, "Galrond of the Claw"),
(@ENTRY_GALROND, 0, 5, "Move back! His flames are too intense!", 14, 0, 100, 0, 0, 0, "Galrond of the Claw"),
(@ENTRY_BARON_GEDDON_WARNING_TRIGGER, 0, 0, "As a final act of revenge, Baron Geddon has made you a living bomb! Move away from your allies!", 41, 0, 100, 0, 0, 0, "Baron Geddon Warning Trigger");
DELETE FROM `conditions` WHERE `SourceTypeOrReferenceId` IN (13, 17) AND `SourceEntry` IN (@SPELL_WEAKENING, @SPELL_INFERNO_PING, @SPELL_LIVING_BOMB);
INSERT INTO `conditions` (`SourceTypeOrReferenceId`, `SourceGroup`, `SourceEntry`, `SourceId`, `ElseGroup`, `ConditionTypeOrReference`, `ConditionTarget`, `ConditionValue1`, `ConditionValue2`, `ConditionValue3`, `NegativeCondition`, `ErrorTextId`, `ScriptName`, `Comment`) VALUES
(17, 0, @SPELL_WEAKENING, 0, 0, 31, 1, 3, @ENTRY_BARON_GEDDON, 0, 0, 0, "", "Weakening targets Baron Geddon"),
(13, 1, @SPELL_INFERNO_PING, 0, 0, 31, 1, 3, @ENTRY_GALROND, 0, 0, 0, "", "Inferno Ping targets Baron Geddon");
DELETE FROM `spell_dbc` WHERE  `Id` IN (@SPELL_WEAKENING_SERVERSIDE, @SPELL_INFERNO_SERVERSIDE);
INSERT INTO `spell_dbc` (`Id`, `castingTimeIndex`, `rangeIndex`, `durationIndex`, `Comment`, `Effect1`, effectMiscValue1, effectImplicitTargetA1) VALUES
(@SPELL_WEAKENING_SERVERSIDE, 1, 1, 0, 'The Return of Baron Geddon - Weakening Serverside', 90, @KILL_CREDIT, 106);
-- DELETE FROM `spelleffect_dbc` WHERE `effectSpellId` IN (@SPELL_WEAKENING_SERVERSIDE, @SPELL_INFERNO_SERVERSIDE);
-- INSERT INTO `spelleffect_dbc` (`Id`, `effect`, `effectApplyAuraName`, `effectRadiusIndex`, `effectBasePoints`, `effectMiscValue`, `effectImplicitTargetA`, `effectImplicitTargetB`, `effectSpellId`, `effectIndex`) VALUES
-- (@SPELL_WEAKENING_EFFECTDBC_ID, 90, 0, 0, 0, @KILL_CREDIT, 106, 0, @SPELL_WEAKENING_SERVERSIDE, 0);
DELETE FROM `spell_linked_spell` WHERE `spell_trigger` IN (-@SPELL_WEAKENING, @SPELL_INFERNO_SERVERSIDE);
DELETE FROM `spell_script_names` WHERE `spell_id` IN (@SPELL_WEAKENING, @SPELL_INFERNO, @SPELL_INFERNO_DAMAGE);
INSERT INTO `spell_script_names` (`spell_id`, `ScriptName`) VALUES
(@SPELL_WEAKENING, "spell_weakening_baron_geddon"),
(@SPELL_INFERNO, "spell_inferno_baron_geddon");

UPDATE `creature_template` SET `mechanic_immune_mask`='613097436' WHERE (`entry`='40147');

-- Lycanthoth the Corruptor
DELETE FROM `smart_scripts` WHERE `source_type` = '0' AND `entryorguid` = '39446';
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`) VALUES
('39446', '0', '0', '1', '4', '0', '100', '0', '0', '0', '0', '0', '11', '74061', '0', '0', '0', '0', '0', '2', '0', '0', '0', '0', '0', '0', '0', 'Nepenthe - Lycanthoth - On Aggro - Cast Miasma of Terror'),
('39446', '0', '1', '0', '61', '0', '100', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '2', '0', '0', '0', '0', '0', '0', '0', 'Nepenthe - Lycanthoth - On Aggro - Say Line 0'),
('39446', '0', '2', '0', '0', '0', '100', '0', '8000', '8000', '18000', '21000', '11', '37776', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', 'Nepenthe - Lycanthoth - Cast Blood Howl'),
('39446', '0', '3', '0', '0', '0', '100', '0', '8000', '8000', '120000', '120000', '1', '1', '0', '0', '0', '0', '0', '2', '0', '0', '0', '0', '0', '0', '0', 'Nepenthe - Lycanthoth - IC - Say Line 1'),
('39446', '0', '4', '5', '6', '0', '100', '0', '0', '0', '0', '0', '85', '74078', '0', '0', '0', '0', '0', '7', '0', '0', '0', '0', '0', '0', '0', 'Nepenthe - Lycanthoth - On Death - Cast Summon Spirit of Goldrinn-q25273'),
('39446', '0', '5', '6', '61', '0', '100', '0', '0', '0', '0', '0', '85', '74077', '0', '0', '0', '0', '0', '7', '0', '0', '0', '0', '0', '0', '0', 'Nepenthe - Lycanthoth - On Death - Cast Summon Spirit of Lo\'Gosh-q25272'),
('39446', '0', '6', '0', '61', '0', '100', '0', '0', '0', '0', '0', '28', '74061', '0', '0', '0', '0', '0', '2', '0', '0', '0', '0', '0', '0', '0', 'Nepenthe - Lycanthoth - On Death - Remove Miasma of Terror');

UPDATE `gameobject` SET `spawnMask`='1' WHERE (`id`='202660');

-- Elementary!
UPDATE creature_template SET npcflag = 0x1, ScriptName = 'npc_elementary_crucible' WHERE entry IN (39730, 39736, 39737, 39738);
UPDATE creature_template SET AIName = '', unit_class = 8, ScriptName = 'npc_the_manipulator' WHERE entry = 39756;
DELETE FROM spell_script_names WHERE spell_id = 74303;
INSERT INTO spell_script_names (spell_id, ScriptName) VALUES
(74303, 'spell_elementary_remove_auras');

DELETE FROM gameobject WHERE id = 202723;
SET @OGUID = (SELECT MAX(guid) FROM gameobject);
INSERT INTO gameobject (guid, id, map, spawnMask, phaseMask, position_x, position_y, position_z, orientation, rotation0, rotation1, rotation2, rotation3, spawntimesecs, animprogress, state) VALUES(@OGUID+349, 207897, 725, 1, 1, 822.2258, 986.4875, 324.2448, 0, 0, 0, 1, -4.371139E-08, 7200, 255, 1), -- Doodad_InstanceNewPortal_Purple01
(@OGUID+1, 202723, 1, 1, 1, 5002.502441, -2033.615845, 1273.269653, 0.517997, 0, 0, 1, -4.371139E-08, 86400, 255, 1); -- Elementary! portal

REPLACE INTO spell_area (spell, area, quest_start, quest_end, gender, autocast, quest_start_status, quest_end_status) VALUES
(74287, 4988, 25303, 0, 2, 0, 8, 0), -- Elementary - Crucible of Fire
(74288, 4988, 25303, 0, 2, 0, 8, 0), -- Elementary - Crucible of Earth
(74290, 4988, 25303, 0, 2, 0, 8, 0); -- Elementary - Crucible of Air

REPLACE INTO `creature_text`(`entry`,`groupid`,`id`,`type`,`text`,`probability`,`comment`) VALUES
(39756,0,0,12,"What do you think you're doing, $C? Get away from those instruments!",100,"Elementary! - Aggro"),
(39756,1,0,12,"You cannot ... control the Eye! Cho'gall will know. You will be ... punished.",100,"Elementary! - Death");

-- [SQL] [Kysio's report] Quests - Free Your Mind, the Rest Follows hotfixed
SET @ENTRY_SERVITOR := 39644;
SET @ENTRY_KC := 39719;
SET @GOSSIP := 11281;
SET @ITEM := 52730;
SET @QUEST := 25298;
UPDATE `creature_template` SET `gossip_menu_id` = @GOSSIP, `npcflag` = `npcflag`|1, `AIName` = 'SmartAI' WHERE `entry` = @ENTRY_SERVITOR;
DELETE FROM `gossip_menu_option` WHERE `menu_id` = @GOSSIP;
INSERT INTO `gossip_menu_option` (`menu_id`, `id`, `option_icon`, `option_text`, `option_id`, `npc_option_npcflag`, `action_menu_id`, `action_poi_id`, `box_coded`, `box_money`, `box_text`) VALUES
(@GOSSIP, 0, 0, "<Administer the draught.>", 1, 1, 0, 0, 0, 0 ,'');
UPDATE `creature` SET `spawntimesecs` = 60 WHERE `id` = @ENTRY_SERVITOR;
DELETE FROM `smart_scripts` WHERE `entryorguid` IN (@ENTRY_SERVITOR, @ENTRY_SERVITOR*100);
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`) VALUES 
(@ENTRY_SERVITOR, 0, 0, 0, 10, 0, 100, 0, 1, 10, 60000, 60000, 1, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Twilight Servitor - OOC LoS - Say Line 0 (random)"),
(@ENTRY_SERVITOR, 0, 1, 0, 62, 0, 100, 0, @GOSSIP, 0, 0, 0, 33, @ENTRY_KC, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Twilight Servitor - On Gossip Select - KC"),
(@ENTRY_SERVITOR, 0, 2, 3, 62, 0, 100, 0, @GOSSIP, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Twilight Servitor - On Gossip Select - Close Gossip"),
(@ENTRY_SERVITOR, 0, 3, 0, 61, 0, 100, 0, 0, 0, 0, 0, 80, @ENTRY_SERVITOR*100, 0, 2, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Twilight Servitor - On Gossip Select - Run Script"),
(@ENTRY_SERVITOR*100, 9, 0, 0, 0, 0, 100, 0, 1000, 1000, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Twilight Servitor - On Script - Say Line 1 (random)"),
(@ENTRY_SERVITOR*100, 9, 1, 0, 0, 0, 100, 0, 2000, 2000, 0, 0, 46, 30, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,  'Nepenthe-Twilight Servitor - On Script - Move Forward 30 yards'),
(@ENTRY_SERVITOR*100, 9, 2, 0, 0, 0, 100, 0, 0, 0, 0, 0, 41, 5000, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, "Nepenthe-Twilight Servitor - On Script - Timed Despawn");
DELETE FROM `creature_text` WHERE `entry` = @ENTRY_SERVITOR;
INSERT INTO `creature_text` (`entry`, `groupid`, `id`, `text`, `type`, `language`, `probability`, `emote`, `duration`, `sound`, `comment`) VALUES
(@ENTRY_SERVITOR, 0, 0, "Mar'kowa tallol ye'tarin, it knows, it knows.", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 0, 1, "Thoth'al amun Ree'thael vormos! Vormos! Vormos!", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 0, 2, "We are nothing. Tulall par'okoth. Far'al, ka'kar. The void devours.", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 0, 3, "The shadow sees. Bo'al lal arwi C'toth. The end comes, cloaked in silent fire.", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 0, 4, "Al'tha, Al'tha bormaz. Ni bormaz ta'thall? It comes, it walks in flames, $r!", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 0, 5, "<The Twilight Servitor gurgles at you, white spittle foaming and bubbling from his mouth.>", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 0, 6, "Fear broils forth from the heart of the infinite. Don't make me look! I've seen more than I can stand!", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 0, 7, "H'thon, the column of darkness stretching beyond sight. H'thon marwol qualar: the infinite grasp of night.", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 1, 0, "...What am I saying? Nothing makes sense anymore. I've got to get out of this place!", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 1, 1, "My ... brain ... hurts!", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 1, 2, "Wha - what? Where am I? I've got to get out of here!", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 1, 3, "What did they do to me? I've got to get back to camp...", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 1, 4, "What happened to me? I'm leaving!", 12, 0, 100, 0, 0, 0, "Twilight Servitor"),
(@ENTRY_SERVITOR, 1, 5, "Whoa,  you made the voices go away. I'm outta here!", 12, 0, 100, 0, 0, 0, "Twilight Servitor");
DELETE FROM `conditions` WHERE `SourceTypeOrReferenceId` = 15 AND `SourceGroup` = @GOSSIP;
INSERT INTO `conditions` (`SourceTypeOrReferenceId`,`SourceGroup`,`SourceEntry`,`ElseGroup`,`ConditionTypeOrReference`,`ConditionValue1`,`ConditionValue2`,`ConditionValue3`,`ErrorTextId`,`ScriptName`,`Comment`) VALUES
(15, @GOSSIP, 0, 0, 9, @QUEST, 0, 0, 0, '', "Only show gossip if player has quest"),
(15, @GOSSIP, 0, 0, 2, @ITEM, 1, 0, 0, '', "Only show gossip if player has item");

-- A Bird in Hand
UPDATE `gameobject_template` SET `AIName`='SmartGameObjectAI' WHERE (`entry`='203187');
UPDATE `creature_template` SET `ScriptName`='npc_marion_wormwing' WHERE (`entry`='41112');

DELETE FROM `smart_scripts` WHERE (`entryorguid`='203187') AND (`source_type`='1') AND (`id`='0') AND (`link`='0');
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, `event_param1`, `event_param2`, `event_param3`, `event_param4`, `action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, `target_type`, `target_param1`, `target_param2`, `target_param3`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`) VALUES ('203187', '1', '0', '0', '70', '0', '100', '0', '2', '0', '0', '0', '12', '41112', '1', '300000', '0', '0', '0', '7', '0', '0', '0', '0', '0', '0', '0', 'Raufen - Harpy Signal Fire - Summon Harpy');
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `event_type`, `event_param1`, `action_type`, `action_param1`, `target_type`, `comment`) VALUES ('203187', '1', '1', '70', '2', '33', '41169', '7', 'Raufen - A Bird in Hand - Give KC');

-- A Prayer and a Wing
DELETE FROM `creature` WHERE (`id`='41084');

-- Black Heart of Flame
DELETE FROM `creature` WHERE (`id`='40107');
